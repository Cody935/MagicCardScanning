<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{ details.name }} - MTG Card Scanner</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/result_style.css') }}">
    <link href="https://fonts.googleapis.com/css2?family=Merriweather:wght@700&family=Roboto:wght@400;700&display=swap" rel="stylesheet">
</head>
<body>
    <div class="main-container">
        
        <a href="/" class="back-link">â¬… Back to Scanner</a>
        
        <h1 class="result-title">{{ details.name }}</h1>

        <div class="result-layout">
            
            <div class="card-image-section">
                {% if details.image_url %}
                <img src="{{ details.image_url }}" alt="{{ details.name }}" class="card-art-image">
                {% else %}
                <img src="{{ image_path }}" alt="Uploaded card" class="card-art-image placeholder-image">
                <p class="image-note">Displaying uploaded image.</p>
                {% endif %}
            </div>
            
            <div class="card-details-section">
                
                <div class="card-panel core-info-panel">
                    <div class="title-row">
                        <span class="card-name-title">{{ details.name }}</span>
                        <span class="mana-cost">{{ details.mana_cost | replace('{', '') | replace('}', '') | replace('/', '') }}</span>
                    </div>
                    
                    <p class="type-line">{{ details.type_line }}</p>

                    <div class="oracle-text-box">
                        <p>{{ details.printed_text | replace('\n', '<br>') | safe }}</p>
                    </div>

                    {% if details.power != 'N/A' and details.toughness != 'N/A' %}
                    <div class="pt-box">
                        {{ details.power }}/{{ details.toughness }}
                    </div>
                    {% endif %}
                </div>

                <div class="card-panel metadata-panel">
                    <h3>Metadata & Price</h3>
                    
                    <div class="detail-row">
                        <span class="detail-label">Set:</span> 
                        <span class="detail-value">{{ details.set }}</span>
                    </div>
                    <div class="detail-row">
                        <span class="detail-label">Collector #:</span> 
                        <span class="detail-value">{{ details.collector_number }}</span>
                    </div>
                    <div class="detail-row">
                        <span class="detail-label">Rarity:</span> 
                        <span class="detail-value rarity-{{ details.rarity }}">{{ details.rarity.title() }}</span>
                    </div>
                    <div class="detail-row">
                        <span class="detail-label">Artist:</span> 
                        <span class="detail-value">{{ details.artist }}</span>
                    </div>
                    <div class="detail-row price-row">
                        <span class="detail-label">Price:</span> 
                        <span class="detail-value price-value">
                            {% if details.price_usd and details.price_usd != 'N/A' %}
                                ${{ details.price_usd }} USD
                            {% else %}
                                N/A
                            {% endif %}
                        </span>
                    </div>
                </div>

            </div>
        </div>
        
        <footer>
            Powered by Scryfall API
        </footer>
    </div>
</body>
</html>